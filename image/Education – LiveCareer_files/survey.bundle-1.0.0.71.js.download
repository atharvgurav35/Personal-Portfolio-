(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{804:function(e,t,n){"use strict";n.r(t),n.d(t,"mapDispatchToProps",(function(){return _}));var s=n(0),r=n.n(s),o=n(28),i=n(17),a=n(1),u=n(36),c=n(63),l=n(71),p=n(5),d=n(812),f=n(44),D=n(51),y=n(94),b=n(32),v=n(19),I=n.n(v);function C(e){var t=["student","entry-lvl","experienced","manager","executive"];return r.a.createElement("div",{className:"page-main sticky"},r.a.createElement(f.a,{hideSaveChangeCta:!0}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement(D.a,{updateVisitedIndex:e.updateVisitedIndex,pageCode:"survey",isProgressBar:!0,hidePreviewTipSection:!0,section:"survey",hideSaveChangeCta:!0}),r.a.createElement("section",{className:"jobstatus-container"},r.a.createElement("div",{className:"container p-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 p-0"},r.a.createElement("div",{className:"career-information"},r.a.createElement("ul",{className:"list-group list-preference js-preference ".concat((e.state.selectedExpLevel.responseID||e.state.selectedExpLevel.responseCD)&&"selected-item")},e.state.experienceLevel.map((function(n,s){return r.a.createElement("li",{key:s,className:"list-group-item ".concat((0!=e.state.selectedExpLevel.responseID&&e.state.selectedExpLevel.responseID===n.responseID||e.state.selectedExpLevel.responseCD&&e.state.selectedExpLevel.responseCD===n.responseCD)&&"selected")},r.a.createElement("div",{id:n.label,className:"item-wrap",onClick:e.careerActiveState},r.a.createElement("div",{className:"item-center"},r.a.createElement("span",{className:"spirit-ciupp icon-".concat(t[s])}),r.a.createElement("p",{className:"text-prefer"},n.displayText))))}))))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"dropdown-wrapper"},r.a.createElement(y.a,{labelName:window.RDL.Localization.surveyCarrerfieldLabel,customClass:"select-degree",valueKey:"displayText",defaultValue:e.state.selectedIndustry.displayText,labelKey:"displayText",optionLabel:e.state.industry,name:window.RDL.Localization.surveyCarrerfieldLabel,errorMessage:"",onChange:e.onChange,placeHolder:RDL.Localization.btnSel}),e.state.selectedIndustry.displayText&&e.state.selectedIndustry.displayText!=window.RDL.Localization.btnSel?r.a.createElement(y.a,{labelName:window.RDL.Localization.surveySubCarrerfieldLabel,customClass:"select-degree",labelKey:"displayText",defaultValue:e.state.selectedSubIndustry.displayText,optionLabel:e.state.subIndustry,valueKey:"displayText",name:window.RDL.Localization.surveySubCarrerfieldLabel,errorMessage:"",onChange:e.onChange,placeHolder:RDL.Localization.btnSel}):"")),r.a.createElement("div",{className:"col-12 mt-5"},r.a.createElement("div",{className:"page-action d-flex mt-3"},r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:e.onBackClick},RDL.Localization.btnBack),r.a.createElement("button",{className:"btn btn-primary btn-lg",type:"button",onClick:e.saveSurveyResponses},RDL.Localization.btnContinue)))))))),r.a.createElement(b.b,null),RDL.enableInterceptModal&&r.a.createElement(I.a,{isOpen:e.state.showInterceptModal,title:window.RDL.Localization.interceptModalTitle,btnPrimaryLabel:"",btnSecondaryLabel:"",onPrimaryClick:"",onSecondaryClick:"",closeModal:e.closeModal,isHeaderIcon:!0,shouldCloseOnOverlayClick:e.closeModal,cssClass:{btnPrimary:"btn-primary mr-0",headerIconClassName:"far fa-exclamation-circle fa-lg",btnSecondary:"btn-secondary",modalDialog:"modal-md"}},r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",{className:"p mb-0",dangerouslySetInnerHTML:{__html:window.RDL.Localization.interceptModalText+'<br/> <a href="'+window.RDL.Paths.interceptLink+'">'+window.RDL.Localization.interceptModalLinkText+"</a>"}}))))}
// EXTERNAL MODULE: ./node_modules/@license-admin/viewmodel/build/index.js
n(15);var m=window.RDL.Paths.BaseApiUrl;function h(e){return fetch(m+"survey_options?cultureCD="+e,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}function L(e,t,n){return fetch(m+"survey/surveyoptions?careerLevelQuestionId="+e+"&industryQuestionId="+t+"&culture="+n,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(n){var s=n.careerLevels?n.careerLevels.responses.slice(0,5):[],r=n.industries?n.industries.responses:[];return s&&s.length>0&&s.forEach((function(t){t.questionID=e})),r&&r.length>0&&r.forEach((function(e){e.questionID=t})),{experienceLevel:s,industries:r}}))}function E(e,t){return fetch(m+"survey/subindustry?reponse_id="+e+"&culture="+t,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))}function S(e,t,n){return fetch(m+"subindustries?questionCD="+e+"&industryCD="+t+"&cultureCD="+n,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))}function g(e,t,n,s){return fetch(m+"save_or_update_user_response",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({responseList:e,docID:t,userUID:n,cultureCD:s})}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}function w(e,t,n,s,r){var o=[];return e.forEach((function(e,i){r[i]&&o.push({QuestionID:e,QuestionCD:t,UserUID:n,DocumentID:s,SurveyResponses:[r[i]]})})),function(e){return fetch(m+"survey",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e}))}(o)}function R(e,t,n,s){return(s?function(e,t){return fetch(m+"user_responses?userUID="+e+"&cultureCd="+t,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=[];return e&&e.length>0&&e.forEach((function(e,n){t.push({responseCD:e.responses?e.responses[0].responseCD:"",questionCD:null,questionID:e.question.id,responseID:e.responses?e.responses[0].responseID:0})})),t})).catch((function(e){console.log(e)}))}
// EXTERNAL MODULE: ./node_modules/@license-admin/helper/build/index.js
(t,n):function(e){return fetch(m+"person_responses?partyid="+e,{credentials:"include"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))}(e)).then((function(e){return e||[]}))}var x=n(2),U=n(25),T=n.n(U);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,M(s.key),s)}}function q(e,t,n){return t=N(t),function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],N(e).constructor):t.apply(e,n))}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=j(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:String(t)}var G=function(e){function t(e,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(B(s=q(this,t,[e,n])),"assignRef",(function(e,t){void 0!==s[e]&&(s[e]=t)})),Q(B(s),"getSurveyData",(function(){(function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],o=[],i=s?L(e,t,n):h(n);return i.then((function(n){return n.experienceLevel&&n.experienceLevel.length>0&&(n.experienceLevel=n.experienceLevel.slice(0,5),n.experienceLevel.forEach((function(t,n){r.push({displayText:t.definition?t.definition:t.displayText,responseID:t.responseID?t.responseID:0,responseCD:t.responseCD?t.responseCD:t.id,questionCD:t.questionCD?t.questionCD:null,questionID:s?e:0,surveyResponseId:t.responseID?t.responseID:0})}))),n.industries&&n.industries.length>0&&n.industries.forEach((function(e,n){o.push({displayText:e.definition?e.definition:e.displayText,responseID:e.responseID?e.responseID:0,responseCD:e.responseCD?e.responseCD:e.id,questionCD:e.questionCD?e.questionCD:null,questionID:s?t:0,surveyResponseId:e.responseID?e.responseID:0,label:e.definition?e.definition:e.displayText,value:e.definition?e.definition:e.displayText})})),{experienceLevel:r,industries:o}}))})(a.UserQuestionID.EXPLVL,a.UserQuestionID.CAREER,window.RDL.cultureCD,s.isGetByID).then((function(e){var t=e.industries;t.unshift(s.objIndDefault),s.setState({experienceLevel:T()(s.state.experienceLevel,{$set:e.experienceLevel}),industry:T()(s.state.industry,{$set:t})}),s.GetPersonResponses()}))})),Q(B(s),"getSubIndustry",(function(e){var t=s.isGetByID?s.state.industry.filter((function(t){return t.responseID==e})):s.state.industry.filter((function(t){return t.responseCD==e}));t.length>0?function(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],i=r?E(s,n):S(e,t,n);return i.then((function(e){return e&&e.length>0&&e.forEach((function(e){o.push({displayText:e.definition?e.definition:e.displayText,responseID:e.responseID?e.responseID:0,responseCD:e.responseCD?e.responseCD:e.id,questionCD:e.questionCD?e.questionCD:null,questionID:r?166:0,surveyResponseId:e.responseID?e.responseID:0,label:e.definition?e.definition:e.displayText,value:e.definition?e.definition:e.displayText})})),o}))}(a.UserQuestionCD.CARSUB,t[0].responseCD,window.RDL.cultureCD,t[0].responseID,s.isGetByID).then((function(e){var t=e;t.unshift(s.objSubIndDefault),s.setState({subIndustry:T()(s.state.subIndustry,{$set:t})},(function(){document.getElementsByClassName("form-group")[1].classList.add("d-opac"),R(s.props.User.partyID,s.props.User.UserUID,window.RDL.cultureCD,s.isGetByID).then((function(e){if(e&&e.length>0){var t=s.isGetByID?e.filter((function(e){return e.questionID==a.UserQuestionID.CARSUB}))[0]:e.filter((function(e){return e.questionCD==a.UserQuestionCD.CARSUB}))[0];if(s.state.subIndustry&&t){var n=s.state.subIndustry.filter((function(e){return e.responseCD==t.responseCD}))[0];n&&s.setState({selectedSubIndustry:T()(s.state.selectedSubIndustry,{$set:n})})}}}))}))})):s.setState({subIndustry:T()(s.state.subIndustry,{$set:""})})})),Q(B(s),"careerActiveState",(function(e){if(e)if(s.state.selectedExpLevel.responseID||s.state.selectedExpLevel.responseCD)s.setState({selectedExpLevel:P(P({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL})});else{var t=e.target?e.target.innerText.trim():e.innerText;s.setState({selectedExpLevel:t?s.state.experienceLevel.filter((function(e){return e.displayText==t}))[0]:P(P({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL})})}})),Q(B(s),"saveSurveyResponses",(function(){var e=[],t=[];if(Object.keys(s.state).forEach((function(n){var r;-1!=["selectedExpLevel","selectedIndustry","selectedSubIndustry"].indexOf(n)&&(0!=s.state[n].responseID||s.state[n].responseCD&&s.state[n].responseCD!=window.RDL.Localization.btnSel?(r=s.isGetByID?{ResponseID:s.state[n].responseID,ResponseText:s.state[n].displayText,ResponseCD:s.state[n].responseCD}:{PartyID:s.props.User.partyID,ResponseCD:s.state[n].responseCD,CultureCD:window.RDL.cultureCD,QuestionCD:s.state[n].questionCD},e.push(r),t.push({responseID:s.state[n].responseID,responseCD:s.state[n].responseCD,questionID:s.state[n].questionID,questionCD:s.state[n].questionCD})):0===s.state[n].responseID&&t.push({responseID:0,responseCD:"",questionID:s.state[n].questionID,questionCD:s.state[n].questionCD}))})),t.length>0){var n=x.DocumentHelper.addUpdateDocResponsesForQID(s.state.doc,t,s.isGetByID),r=s.state.selectedSubIndustry.displayText,o="jobTitle";0==s.state.selectedSubIndustry.responseID&&(r=s.state.selectedIndustry.displayText,o="industry"),function(e,t,n,s,r,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(i?w(e,t,n,s,r):g(r,s,n,o)).then((function(e){return 0==i?e:e.ok?e.json():void 0})).then((function(e){return e}))}([a.UserQuestionID.EXPLVL,a.UserQuestionID.CAREER,a.UserQuestionID.CARSUB],null,s.props.User.UserUID,n.id,e,window.RDL.cultureCD,s.isGetByID).then((function(e){var t=s.state.selectedIndustry.responseCD;!s.isGetByID&&e&&(o="industry",t=e.split(";")[0],r=e.split(";")[1]),n=x.DocumentHelper.setTTCPreferencesInDocument(n,r,o,t),s.props.documentActions.UpdateDocument(s.props.User.UserUID,n),s.props.documentActions.SetJobTitlePreference(n),s.props.history.push(Object(p.b)("survey").nextPageUrl),RDL.trackExpLevel&&s.trackExperienceLevel()}))}else s.props.history.push(Object(p.b)("survey").nextPageUrl)})),Q(B(s),"trackExperienceLevel",(function(){var e="";if(s.state.selectedExpLevel){switch(s.state.selectedExpLevel.responseCD){case"STUDEN":e="Student";break;case"ENTLVL":e="Entry Level";break;case"EXPERN":e="Experienced";break;case"MANAGR":e="Manager";break;case"EXECTV":e="Executive"}var t={"Experience Level":e};if(""!=e){window.RDL.TrackEvents("identify",t,s.props.User.UserUID,x.CommonHelper.isLoggedInUser(window.RDL.UserClaims));var n=JSON.parse(localStorage.getItem("mixPanelIdentifyPreLogin"))||{};n["Experience Level"]=e,localStorage.setItem("mixPanelIdentifyPreLogin",JSON.stringify(n))}}})),Q(B(s),"onBackClick",(function(){window.RDL.skipSelectCV?s.props.history.push(Object(p.b)("selectResume").backPageUrl):s.props.history.push(Object(p.b)("survey").backPageUrl)})),Q(B(s),"closeModal",(function(){s.setState({showInterceptModal:!1,popupName:""})})),Q(B(s),"onChange",(function(e){if(e){var t=s.isGetByID?"questionID":"questionCD",n=s.isGetByID?"responseID":"responseCD",r=e[t],o=e[n];switch(r){case a.UserQuestionID.CAREER:case a.UserQuestionCD.CAREER:s.setState({selectedIndustry:T()(s.state.selectedIndustry,{$set:e}),selectedSubIndustry:T()(s.state.selectedSubIndustry,{$set:s.objSubIndDefault})}),0!=o&&s.getSubIndustry(o);break;case a.UserQuestionID.CARSUB:case a.UserQuestionCD.CARSUB:s.setState({selectedSubIndustry:T()(s.state.selectedSubIndustry,{$set:e})})}}})),s.objIndDefault=P(P({},a.surveyType),{},{displayText:window.RDL.Localization.btnSel,questionID:a.UserQuestionID.CAREER,questionCD:a.UserQuestionCD.CAREER,label:RDL.Localization.btnSel}),s.objSubIndDefault=P(P({},a.surveyType),{},{displayText:window.RDL.Localization.btnSel,questionID:a.UserQuestionID.CARSUB,questionCD:a.UserQuestionCD.CARSUB,label:RDL.Localization.btnSel}),s.state={experienceLevel:[P({},a.surveyType)],industry:[P({},a.surveyType)],subIndustry:[P({},a.surveyType)],selectedExpLevel:P(P({},a.surveyType),{},{questionID:a.UserQuestionID.EXPLVL}),selectedIndustry:s.objIndDefault,selectedSubIndustry:s.objSubIndDefault,doc:s.props.Document,showInterceptModal:!0},s.isGetByID="LUK"===window.RDL.PortalSettings.ConfigurePortalCd.toUpperCase(),s.isNewTTCBaselined=RDL.isNewTTCBaselined,s}var n,s,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,e),n=t,(s=[{key:"componentDidMount",value:function(){this.isNewTTCBaselined||RDL.removeSurveyFromSteps||this.getSurveyData(),RDL.closePageLoader()}},{key:"componentWillMount",value:function(){(this.isNewTTCBaselined||RDL.removeSurveyFromSteps)&&this.props.history.replace(Object(p.b)("survey").nextPageUrl),"undefined"!=typeof localStorage&&(localStorage.getItem("interceptModalFR")?this.setState({showInterceptModal:!1}):localStorage.setItem("interceptModalFR",!0))}},{key:"GetPersonResponses",value:function(){var e,t,n,s,r=this;R(this.props.User.partyID,this.props.User.UserUID,window.RDL.cultureCD,this.isGetByID).then((function(o){o&&o.length>0&&(r.isGetByID?(e=o.filter((function(e){return e.questionID==a.UserQuestionID.EXPLVL}))[0],t=o.filter((function(e){return e.questionID==a.UserQuestionID.CAREER}))[0]):(e=o.filter((function(e){return e.questionCD==a.UserQuestionCD.EXPLVL}))[0],t=o.filter((function(e){return e.questionCD==a.UserQuestionCD.CAREER}))[0])),r.state.experienceLevel&&e&&(n=r.state.experienceLevel.filter((function(t){return t.responseCD==e.responseCD}))[0],r.setState({selectedExpLevel:n?T()(r.state.selectedExpLevel,{$set:n}):{}})),r.state.industry&&t&&(s=r.state.industry.filter((function(e){return e.responseCD==t.responseCD}))[0],r.setState({selectedIndustry:s?T()(r.state.selectedIndustry,{$set:s}):{}}),r.getSubIndustry(r.isGetByID?s.responseID:s.responseCD))}))}},{key:"render",value:function(){return r.a.createElement(C,{assignRef:this.assignRef,closeModal:this.closeModal,careerActiveState:this.careerActiveState,onBackClick:this.onBackClick,state:this.state,onChange:this.onChange,saveSurveyResponses:this.saveSurveyResponses})}}])&&k(n.prototype,s),o&&k(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(s.Component);function _(e){return{documentActions:Object(i.b)(u,e),userActions:Object(i.b)(c,e),commonActions:Object(i.b)(l,e)}}t.default=Object(d.a)(Object(o.b)((function(e){return{Document:e.Document,User:e.User}}),_)(G))}}]);